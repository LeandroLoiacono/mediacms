!function(){"use strict";var e,t={795:function(e,t,i){i(9471),i(5338),i(7460),i(4571),i(8790),i(7664),i(6522),i(2140)},878:function(e,t,i){var n=i(9471),a=i(8713),r=i.n(a),o=i(6387),s=i(5321),l=i(2828);function d(e){const{thumbnail:t}=(0,o.useUser)(),i={"aria-label":"Account profile photo that opens list of options and settings pages links",className:"thumbnail"};switch(e.isButton?void 0!==e.onClick&&(i.onClick=e.onClick):i.type="span",e.size){case"small":case"large":i.className+=" "+e.size+"-thumb"}return n.createElement(s.i,i,t?n.createElement("img",{src:t,alt:""}):n.createElement(l.Z,{type:"person"}))}d.propTypes={isButton:r().bool,size:r().oneOf(["small","medium","large"]),onClick:r().func},d.defaultProps={isButton:!1,size:"medium"}},1134:function(e,t,i){function n(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function r(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function o(e,t){return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}i.d(t,{CX:function(){return o},GT:function(){return d},kN:function(){return n},qk:function(){return a},uU:function(){return s},xi:function(){return l},zc:function(){return r}});const s=window.cancelAnimationFrame||window.mozCancelAnimationFrame,l=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;function d(){const e={document:{visibility:[]},window:{resize:[],scroll:[]}};return document.addEventListener("visibilitychange",(function(){e.document.visibility.map((e=>e()))})),window.addEventListener("resize",(function(){e.window.resize.map((e=>e()))})),window.addEventListener("scroll",(function(){e.window.scroll.map((e=>e()))})),{doc:function(t){"function"==typeof t&&e.document.visibility.push(t)},win:function(t,i){"function"==typeof t&&e.window.resize.push(t),"function"==typeof i&&e.window.scroll.push(i)}}}},1936:function(e,t,i){i(8413),i(3212),i(795),i(1470)},2140:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarThemeSwitcher=void 0;var a=n(i(9471)),r=i(5338);t.SidebarThemeSwitcher=function(){var e=(0,r.useTheme)(),t=e.currentThemeMode,i=e.changeThemeMode,n=e.themeModeSwitcher;return n.enabled&&"sidebar"===n.position&&a.default.createElement("div",{className:"sidebar-theme-switcher"},a.default.createElement("div",{className:"sidebar-theme-switcher-inner"},a.default.createElement("span",{className:"theme-icon"+("dark"===t?"":" active")},a.default.createElement("i",{className:"material-icons","data-icon":"wb_sunny"})),a.default.createElement("span",null,a.default.createElement("span",{className:"checkbox-switcher"},a.default.createElement("input",{type:"checkbox",checked:"dark"===t,onChange:i}))),a.default.createElement("span",{className:"theme-icon"+("dark"===t?" active":"")},a.default.createElement("i",{className:"material-icons","data-icon":"brightness_3"}))))}},2828:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(9471);const a=({type:e})=>e?n.createElement("i",{className:"material-icons","data-icon":e}):null},2901:function(e,t,i){var n=i(9471);const a=n.forwardRef(((e,t)=>void 0!==e.children?n.createElement("div",{ref:t,className:"popup"+(void 0!==e.className?" "+e.className:""),style:e.style},e.children):null));t.Ay=a},4463:function(e,t,i){i.r(t),i.d(t,{UserConsumer:function(){return l},UserContext:function(){return r},UserProvider:function(){return s}});var n=i(9471),a=i(3997);const r=(0,n.createContext)(),o=(0,a.$)(window.MediaCMS).member,s=({children:e})=>{const t={isAnonymous:o.is.anonymous,username:o.username,thumbnail:o.thumbnail,userCan:o.can,pages:o.pages};return n.createElement(r.Provider,{value:t},e)},l=r.Consumer;t.default=r},5305:function(e,t,i){var n=i(9471),a=i(9834),r=i(8713),o=i.n(r);function s(e){const t=(0,n.useRef)(null),[i,r]=(0,n.useState)(null);let o=[];function s(t,i){var n;i.preventDefault(),i.stopPropagation(),n=o[t].id,void 0!==e.pages[n]&&r(n)}return(0,n.useEffect)((()=>{void 0!==e.pages[e.initPage]?r(e.initPage):Object.keys(e.pages).length?r(Object.keys(e.pages)[0]):r(null)}),[e.initPage]),(0,n.useEffect)((()=>{!function(){let e=0;for(;e<o.length;)o[e].elem.removeEventListener("click",o[e].listener),e+=1;o=[]}(),i&&(function(){let i,n,r=(0,a.findDOMNode)(t.current),l=r.querySelectorAll(e.pageChangeSelector);if(l.length)for(i=0;i<l.length;)n=l[i].getAttribute(e.pageIdSelectorAttr),n=n?n.trim():n,n&&(o[i]={id:n,elem:l[i]},o[i].listener=(e=>t=>s(e,t))(i),o[i].elem.addEventListener("click",o[i].listener)),i+=1;e.focusFirstItemOnPageChange&&r.focus()}(),"function"==typeof e.pageChangeCallback&&e.pageChangeCallback(i))}),[i]),i?n.createElement("div",{ref:t},n.cloneElement(e.pages[i])):null}s.propTypes={initPage:o().string,pages:o().object.isRequired,pageChangeSelector:o().string.isRequired,pageIdSelectorAttr:o().string.isRequired,focusFirstItemOnPageChange:o().bool,pageChangeCallback:o().func},s.defaultProps={focusFirstItemOnPageChange:!0}},5320:function(e,t,i){i.r(t),i.d(t,{LayoutConsumer:function(){return c},LayoutContext:function(){return d},LayoutProvider:function(){return u}});var n=i(9471),a=i(7154),r=i(7460),o=i(6522),s=i(8899);let l;const d=(0,n.createContext)(),u=({children:e})=>{const t=(0,n.useContext)(s.default),i=new a.BrowserCache("MediaCMS["+t.id+"][layout]",86400),u=!(!document.getElementById("app-sidebar")&&!document.querySelector(".page-sidebar")),[c,p]=(0,n.useState)(i.get("visible-sidebar")),[m,h]=(0,n.useState)(!1);(0,n.useEffect)((()=>{c?(0,o.addClassname)(document.body,"visible-sidebar"):(0,o.removeClassname)(document.body,"visible-sidebar"),"media"!==r.PageStore.get("current-page")&&1023<window.innerWidth&&i.set("visible-sidebar",c)}),[c]),(0,n.useEffect)((()=>{r.PageStore.once("page_init",(()=>{"media"===r.PageStore.get("current-page")&&(p(!1),(0,o.removeClassname)(document.body,"visible-sidebar"))})),p("media"!==r.PageStore.get("current-page")&&1023<window.innerWidth&&(null===c||c))}),[]);const f={enabledSidebar:u,visibleSidebar:c,setVisibleSidebar:p,visibleMobileSearch:m,toggleMobileSearch:()=>{h(!m)},toggleSidebar:()=>{const e=!c;!function(e){clearTimeout(l),(0,o.addClassname)(document.body,"sliding-sidebar"),l=setTimeout((function(){"media"===r.PageStore.get("current-page")?e?(0,o.addClassname)(document.body,"overflow-hidden"):(0,o.removeClassname)(document.body,"overflow-hidden"):!e||767<window.innerWidth?(0,o.removeClassname)(document.body,"overflow-hidden"):(0,o.addClassname)(document.body,"overflow-hidden"),e?(0,o.addClassname)(document.body,"visible-sidebar"):(0,o.removeClassname)(document.body,"visible-sidebar"),l=setTimeout((function(){l=null,(0,o.removeClassname)(document.body,"sliding-sidebar")}),220)}),20)}(e),p(e)}};return n.createElement(d.Provider,{value:f},e)},c=d.Consumer},5321:function(e,t,i){i.d(t,{i:function(){return s}});var n=i(9471),a=i(8713),r=i.n(a);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(null,arguments)}function s(e){const t=n.createElement("span",null,n.createElement("span",null,e.children)),i={tabIndex:e.tabIndex||null,title:e.title||null,className:"circle-icon-button"+(void 0!==e.className?" "+e.className:"")+(e.buttonShadow?" button-shadow":"")};return void 0!==e["data-page-id"]&&(i["data-page-id"]=e["data-page-id"]),void 0!==e["aria-label"]&&(i["aria-label"]=e["aria-label"]),"link"===e.type?n.createElement("a",o({},i,{href:e.href||null,rel:e.rel||null}),t):"span"===e.type?n.createElement("span",o({},i,{onClick:e.onClick||null}),t):n.createElement("button",o({},i,{onClick:e.onClick||null}),t)}s.propTypes={type:r().oneOf(["button","link","span"]),buttonShadow:r().bool,className:r().string},s.defaultProps={type:"button",buttonShadow:!1}},5465:function(e,t,i){i.r(t),i.d(t,{ThemeConsumer:function(){return c},ThemeContext:function(){return d},ThemeProvider:function(){return u}});var n=i(9471),a=i(7154),r=i(6522),o=i(3997),s=i(8899);const l=(0,o.$)(window.MediaCMS),d=(0,n.createContext)(),u=({children:e})=>{const t=(0,n.useContext)(s.default),i=new a.BrowserCache("MediaCMS["+t.id+"][theme]",86400),[o,u]=(0,n.useState)((c=i.get("mode"),p=l.theme.mode,"light"===c||"dark"===c?c:p));var c,p;const m=function(e){let t=null,i=null;return void 0!==e.darkMode&&((0,r.supportsSvgAsImg)()&&void 0!==e.darkMode.svg&&""!==e.darkMode.svg?i=e.darkMode.svg:void 0!==e.darkMode.img&&""!==e.darkMode.img&&(i=e.darkMode.img)),void 0!==e.lightMode&&((0,r.supportsSvgAsImg)()&&void 0!==e.lightMode.svg&&""!==e.lightMode.svg?t=e.lightMode.svg:void 0!==e.lightMode.img&&""!==e.lightMode.img&&(t=e.lightMode.img)),null===t&&null===i||(null===t?t=i:null===i&&(i=t)),{light:t,dark:i}}(l.theme.logo),[h,f]=(0,n.useState)(m[o]);(0,n.useEffect)((()=>{"dark"===o?(0,r.addClassname)(document.body,"dark_theme"):(0,r.removeClassname)(document.body,"dark_theme"),i.set("mode",o),f(m[o])}),[o]);const g={logo:h,currentThemeMode:o,changeThemeMode:()=>{u("light"===o?"dark":"light")},themeModeSwitcher:l.theme.switch};return n.createElement(d.Provider,{value:g},e)},c=d.Consumer},5615:function(e,t,i){i.d(t,{L9:function(){return p},lg:function(){return c}});var n=i(9471),a=i(8713),r=i.n(a),o=i(4571),s=i.n(o),l=i(4480),d=i.n(l);function u(e,t){let i=s()(e,{});return""!==i.origin&&"null"!==i.origin&&i.origin||(i=s()(t+"/"+e.replace(/^\//g,""),{})),i.toString()}function c(e){return n.createElement("div",{className:"error-container"},n.createElement("div",{className:"error-container-inner"},n.createElement("span",{className:"icon-wrap"},n.createElement("i",{className:"material-icons"},"error_outline")),n.createElement("span",{className:"msg-wrap"},e.errorMessage)))}function p(e){const t=(0,n.useRef)(null);let i=null;const a={playerVolume:e.playerVolume,playerSoundMuted:e.playerSoundMuted,videoQuality:e.videoQuality,videoPlaybackSpeed:e.videoPlaybackSpeed,inTheaterMode:e.inTheaterMode};function r(){void 0!==e.onClickNextCallback&&e.onClickNextCallback()}function o(){void 0!==e.onClickPreviousCallback&&e.onClickPreviousCallback()}function s(t){a.playerVolume!==t.volume&&(a.playerVolume=t.volume),a.playerSoundMuted!==t.soundMuted&&(a.playerSoundMuted=t.soundMuted),a.videoQuality!==t.quality&&(a.videoQuality=t.quality),a.videoPlaybackSpeed!==t.playbackSpeed&&(a.videoPlaybackSpeed=t.playbackSpeed),a.inTheaterMode!==t.theaterMode&&(a.inTheaterMode=t.theaterMode),void 0!==e.onStateUpdateCallback&&e.onStateUpdateCallback(t)}function l(){if(null!==i||null!==e.errorMessage)return;if(e.inEmbed||(window.removeEventListener("focus",l),document.removeEventListener("visibilitychange",l)),!t.current)return;e.inEmbed||t.current.focus();const n={on:!1};if(void 0!==e.subtitlesInfo&&null!==e.subtitlesInfo&&e.subtitlesInfo.length){n.languages=[];let t=0;for(;t<e.subtitlesInfo.length;)void 0!==e.subtitlesInfo[t].src&&void 0!==e.subtitlesInfo[t].srclang&&void 0!==e.subtitlesInfo[t].label&&n.languages.push({src:u(e.subtitlesInfo[t].src,e.siteUrl),srclang:e.subtitlesInfo[t].srclang,label:e.subtitlesInfo[t].label}),t+=1;n.languages.length&&(n.on=!0)}i=new(d())(t.current,{enabledTouchControls:!0,sources:e.sources,poster:e.poster,autoplay:e.enableAutoplay,bigPlayButton:!0,controlBar:{theaterMode:e.hasTheaterMode,pictureInPicture:!1,next:!!e.hasNextLink,previous:!!e.hasPreviousLink},subtitles:n,cornerLayers:e.cornerLayers,videoPreviewThumb:e.previewSprite},{volume:a.playerVolume,soundMuted:a.playerSoundMuted,theaterMode:a.inTheaterMode,theSelectedQuality:void 0,theSelectedPlaybackSpeed:a.videoPlaybackSpeed||1},e.info,[.25,.5,.75,1,1.25,1.5,1.75,2],s,r,o),void 0!==e.onPlayerInitCallback&&e.onPlayerInitCallback(i,t.current)}return a.playerVolume=null===a.playerVolume?1:Math.max(Math.min(Number(a.playerVolume),1),0),a.playerSoundMuted=null!==a.playerSoundMuted&&a.playerSoundMuted,a.videoQuality=null!==a.videoQuality?a.videoQuality:"Auto",a.videoPlaybackSpeed=null!==a.videoPlaybackSpeed&&a.videoPlaybackSpeed,a.inTheaterMode=null!==a.inTheaterMode&&a.inTheaterMode,(0,n.useEffect)((()=>(e.inEmbed||document.hasFocus()||"visible"===document.visibilityState?l():(window.addEventListener("focus",l),document.addEventListener("visibilitychange",l)),()=>{null!==i&&(videojs(t.current).dispose(),i=null),void 0!==e.onUnmountCallback&&e.onUnmountCallback()})),[]),null===e.errorMessage?n.createElement("video",{ref:t,className:"video-js vjs-mediacms native-dimensions"}):n.createElement("div",{className:"error-container"},n.createElement("div",{className:"error-container-inner"},n.createElement("span",{className:"icon-wrap"},n.createElement("i",{className:"material-icons"},"error_outline")),n.createElement("span",{className:"msg-wrap"},e.errorMessage)))}c.propTypes={errorMessage:r().string.isRequired},p.propTypes={playerVolume:r().string,playerSoundMuted:r().bool,videoQuality:r().string,videoPlaybackSpeed:r().number,inTheaterMode:r().bool,siteId:r().string.isRequired,siteUrl:r().string.isRequired,errorMessage:r().string,cornerLayers:r().object,subtitlesInfo:r().array.isRequired,inEmbed:r().bool.isRequired,sources:r().array.isRequired,info:r().object.isRequired,enableAutoplay:r().bool.isRequired,hasTheaterMode:r().bool.isRequired,hasNextLink:r().bool.isRequired,hasPreviousLink:r().bool.isRequired,poster:r().string,previewSprite:r().object,onClickPreviousCallback:r().func,onClickNextCallback:r().func,onPlayerInitCallback:r().func,onStateUpdateCallback:r().func,onUnmountCallback:r().func},p.defaultProps={errorMessage:null,cornerLayers:{}}},7154:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var a=Object.getOwnPropertyDescriptor(t,i);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,a)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),a(i(6077),t),a(i(4247),t),a(i(7687),t),a(i(3337),t)},7201:function(e,t,i){var n=i(9471),a=i(8713),r=i.n(a),o=i(2828);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s.apply(null,arguments)}function l(e){let t=[];const i=e.itemAttr||{};void 0===i.className?i.className="":i.className&&(i.className+=" ");let a=e.text?e.icon&&"right"!==e.iconPos?1:0:-1,r=e.icon?e.text&&"right"===e.iconPos?1:0:-1;switch(-1<a&&(t[a]=n.createElement("span",{key:"Text"},e.text)),-1<r&&(t[r]=n.createElement("span",{key:"Icon",className:"right"===e.iconPos?"menu-item-icon-right":"menu-item-icon"},n.createElement(o.Z,{type:e.icon}))),e.itemType){case"link":t=n.createElement("a",s({},e.linkAttr||{},{href:e.link,title:e.text||null}),t),i.className+="link-item"+(e.active?" active":"");break;case"button":case"open-subpage":t=n.createElement("button",s({},e.buttonAttr||{},{key:"button"}),t);break;case"label":t=n.createElement("button",s({},e.buttonAttr||{},{key:"button"}),n.createElement("span",null,e.text||null)),i.className="label-item";break;case"div":t=n.createElement("div",s({},e.divAttr||{},{key:"div"}),e.text||null)}return""!==i.className&&(i.className=" "+i.className),i.className=i.className.trim(),n.createElement("li",i,t)}function d(e){const t=e.items.map(((e,t)=>n.createElement(l,s({key:t},e))));return t.length?n.createElement("div",{className:"nav-menu"+(e.removeVerticalPadding?" pv0":"")},n.createElement("nav",null,n.createElement("ul",null,t))):null}l.propTypes={itemType:r().oneOf(["link","open-subpage","button","label","div"]),link:r().string,icon:r().string,iconPos:r().oneOf(["left","right"]),text:r().string,active:r().bool,divAttr:r().object,buttonAttr:r().object,itemAttr:r().object,linkAttr:r().object},l.defaultProps={itemType:"link",iconPos:"left",active:!1},d.propTypes={removeVerticalPadding:r().bool,items:r().arrayOf(r().shape(l.propTypes)).isRequired},d.defaultProps={removeVerticalPadding:!1}},7664:function(e,t,i){i.d(t,{CircleIconButton:function(){return n.i}});var n=i(5321);i(7256),i(3135),i(2828),i(5305),i(7201),i(6089),i(3818),i(2901),i(6568),i(878)},8175:function(e,t,i){var n=i(9471),a=i(9834);i(5465),i(5320),i(4463),i(1936),function(e,t){const i=e?document.getElementById(e):void 0;i&&t&&a.render(n.createElement(t,null),i)}("page-embed",i(9942).EmbedPage)},8413:function(e,t,i){i(9471),i(7460),i(5338),i(6522),i(2463),i(8790),i(7664),i(9284)},8531:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n=i(9471),a=i(8713),r=i.n(a),o=i(285),s=i(8790),l=i(7460),d=i(6522),u=i(7154),c=i(2818),p=i(5615),m=i(8974);class h extends n.PureComponent{constructor(e){if(super(e),this.state={displayPlayer:!1},this.videoSources=[],function(e){switch(e){case"running":l.MediaPageStore.set("media-load-error-type","encodingRunning"),l.MediaPageStore.set("media-load-error-message","Media encoding is currently running. Try again in few minutes.");break;case"pending":l.MediaPageStore.set("media-load-error-type","encodingPending"),l.MediaPageStore.set("media-load-error-message","Media encoding is pending");break;case"fail":l.MediaPageStore.set("media-load-error-type","encodingFailed"),l.MediaPageStore.set("media-load-error-message","Media encoding failed")}}(this.props.data.encoding_status),null!==l.MediaPageStore.get("media-load-error-type"))return void(this.state.displayPlayer=!0);if("string"==typeof this.props.data.poster_url?this.videoPoster=(0,d.formatInnerLink)(this.props.data.poster_url,this.props.siteUrl):"string"==typeof this.props.data.thumbnail_url&&(this.videoPoster=(0,d.formatInnerLink)(this.props.data.thumbnail_url,this.props.siteUrl)),this.videoInfo=(0,c.uW)(this.props.data.encodings_info,this.props.data.hls_info),Object.keys(this.videoInfo).length){let e=l.VideoViewerStore.get("video-quality");(null===e||"Auto"===e&&void 0===this.videoInfo.Auto)&&(e=720);let t=(0,c.OQ)(e,this.videoInfo);"Auto"===e&&void 0!==this.videoInfo.Auto&&this.videoSources.push({src:this.videoInfo.Auto.url[0]});const i=(0,c.n1)();let n,a;for(a=0;a<this.videoInfo[t].format.length;){if("hls"===this.videoInfo[t].format[a]){this.videoSources.push({src:this.videoInfo[t].url[a]});break}a+=1}for(a in this.props.data.encodings_info[t])this.props.data.encodings_info[t].hasOwnProperty(a)&&i.support[a]&&(n=this.props.data.encodings_info[t][a].url,n&&(n=(0,d.formatInnerLink)(n,this.props.siteUrl),this.videoSources.push({src:n,encodings_status:this.props.data.encodings_info[t][a].status})))}else this.videoInfo=null;if(this.videoSources.length){if(!this.props.inEmbed&&1===this.videoSources.length&&"running"===this.videoSources[0].encodings_status)return l.MediaPageStore.set("media-load-error-type","encodingRunning"),void l.MediaPageStore.set("media-load-error-message","Media encoding is currently running. Try again in few minutes.")}else switch(l.MediaPageStore.get("media-load-error-type")){case"encodingRunning":case"encodingPending":case"encodingFailed":break;default:m.warn("VIDEO DEBUG:","Video files don't exist")}l.PageStore.on("switched_media_auto_play",this.onUpdateMediaAutoPlay.bind(this)),this.browserCache=new u.BrowserCache(s.SiteContext._currentValue.id,86400);const t=new u.MediaDurationInfo;t.update(this.props.data.duration),this.durationISO8601=t.ISO8601(),this.playerElem=null,this.playerInstance=null,this.onPlayerInit=this.onPlayerInit.bind(this),this.onClickNext=this.onClickNext.bind(this),this.onClickPrevious=this.onClickPrevious.bind(this),this.onStateUpdate=this.onStateUpdate.bind(this),this.onVideoEnd=this.onVideoEnd.bind(this),this.onVideoRestart=this.onVideoRestart.bind(this)}componentDidMount(){if(this.videoSources.length){this.recommendedMedia=this.props.data.related_media.length?new u.PlayerRecommendedMedia(this.props.data.related_media,this.props.inEmbed,!l.PageStore.get("config-media-item").displayViews):null,this.upNextLoaderView=!this.props.inEmbed&&this.props.data.related_media.length?new u.UpNextLoaderView(this.props.data.related_media[0]):null;let e=null;if(this.props.inEmbed){let t=document.createElement("a"),i=document.createElement("a");e=document.createElement("div"),e.setAttribute("class","media-links-top-left"),t&&(t.setAttribute("class","title-link"),t.setAttribute("href",this.props.data.url),t.setAttribute("title",this.props.data.title),t.setAttribute("target","_blank"),t.innerHTML=this.props.data.title),i&&(i.setAttribute("class","user-thumb-link"),i.setAttribute("href",(0,d.formatInnerLink)(this.props.data.author_profile,this.props.siteUrl)),i.setAttribute("title",this.props.data.author_name),i.setAttribute("target","_blank"),i.setAttribute("style","background-image:url("+(0,d.formatInnerLink)(l.MediaPageStore.get("media-author-thumbnail-url"),this.props.siteUrl)+")")),e.appendChild(i),e.appendChild(t)}const t=l.MediaPageStore.get("media-url");let i='<button class="share-video-btn"><i class="material-icons">share</i><span>Share</span></button>';i+='<div class="share-options-wrapper">\t\t\t\t\t\t\t\t\t<div class="share-options">\t\t\t\t\t\t\t\t\t\t<div class="share-options-inner">\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-email">\t\t\t\t\t\t\t\t\t\t\t\t<a href="mailto:?body='+t+'" title=""><span><i class="material-icons">email</i></span><span>Email</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-fb">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.facebook.com/sharer.php?u='+t+'" title="" target="_blank"><span></span><span>Facebook</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-tw">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://twitter.com/intent/tweet?url='+t+'" title="" target="_blank"><span></span><span>Twitter</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-whatsapp">\t\t\t\t\t\t\t\t\t\t\t\t<a href="whatsapp://send?text='+t+'" title="" target="_blank" data-action="share/whatsapp/share"><span></span><span>WhatsApp</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-telegram">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://t.me/share/url?url='+t+"&amp;text="+this.props.data.title+'" title="" target="_blank"><span></span><span>Telegram</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-linkedin">\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.linkedin.com/shareArticle?mini=true&amp;url='+t+'" title="" target="_blank"><span></span><span>LinkedIn</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-reddit">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://reddit.com/submit?url='+t+"&amp;title="+this.props.data.title+'" title="" target="_blank"><span></span><span>reddit</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-tumblr">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl='+t+"&amp;title="+this.props.data.title+'" title="" target="_blank"><span></span><span>Tumblr</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-pinterest">\t\t\t\t\t\t\t\t\t\t\t\t<a href="http://pinterest.com/pin/create/link/?url='+t+'" title="" target="_blank"><span></span><span>Pinterest</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-more">\t\t\t\t\t\t\t\t\t\t\t\t<a href="'+t+'" title="More" target="_blank"><span><i class="material-icons">more_horiz</i></span><span></span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>',this.cornerLayers={topLeft:e,topRight:this.upNextLoaderView?this.upNextLoaderView.html():null,bottomLeft:this.recommendedMedia?this.recommendedMedia.html():null,bottomRight:this.props.inEmbed?i:null},this.setState({displayPlayer:!0},(function(){setTimeout((function(){const e=document.querySelector(".share-video-btn"),t=document.querySelector(".share-options-wrapper"),i=document.querySelector(".share-options-inner");e&&e.addEventListener("click",(function(e){(0,d.addClassname)(document.querySelector(".video-js.vjs-mediacms"),"vjs-visible-share-options")})),t&&t.addEventListener("click",(function(e){e.target!==i&&e.target!==t||(0,d.removeClassname)(document.querySelector(".video-js.vjs-mediacms"),"vjs-visible-share-options")}))}),1e3)}))}}componentWillUnmount(){this.unsetRecommendedMedia()}initRecommendedMedia(){null!==this.recommendedMedia&&(this.props.inEmbed||this.recommendedMedia.init(),this.playerInstance.player.on("fullscreenchange",this.recommendedMedia.onResize),l.PageStore.on("window_resize",this.recommendedMedia.onResize),l.VideoViewerStore.on("changed_viewer_mode",this.recommendedMedia.onResize))}unsetRecommendedMedia(){null!==this.recommendedMedia&&(this.playerInstance.player.off("fullscreenchange",this.recommendedMedia.onResize),l.PageStore.removeListener("window_resize",this.recommendedMedia.onResize),l.VideoViewerStore.removeListener("changed_viewer_mode",this.recommendedMedia.onResize),this.recommendedMedia.destroy())}onClickNext(){let e;l.MediaPageStore.get("playlist-id")?(e=l.MediaPageStore.get("playlist-next-media-url"),null===e&&(e=this.props.data.related_media[0].url)):this.props.inEmbed||(e=this.props.data.related_media[0].url),window.location.href=e}onClickPrevious(){let e;l.MediaPageStore.get("playlist-id")?(e=l.MediaPageStore.get("playlist-previous-media-url"),null===e&&(e=this.props.data.related_media[0].url)):this.props.inEmbed||(e=this.props.data.related_media[0].url),window.location.href=e}onStateUpdate(e){l.VideoViewerStore.get("in-theater-mode")!==e.theaterMode&&o.VideoViewerActions.set_viewer_mode(e.theaterMode),l.VideoViewerStore.get("player-volume")!==e.volume&&o.VideoViewerActions.set_player_volume(e.volume),l.VideoViewerStore.get("player-sound-muted")!==e.soundMuted&&o.VideoViewerActions.set_player_sound_muted(e.soundMuted),l.VideoViewerStore.get("video-quality")!==e.quality&&o.VideoViewerActions.set_video_quality(e.quality),l.VideoViewerStore.get("video-playback-speed")!==e.playbackSpeed&&o.VideoViewerActions.set_video_playback_speed(e.playbackSpeed)}onPlayerInit(e,t){this.playerElem=t,this.playerInstance=e,this.upNextLoaderView&&(this.upNextLoaderView.setVideoJsPlayerElem(this.playerInstance.player.el_),this.onUpdateMediaAutoPlay()),this.props.inEmbed||this.playerElem.parentNode.focus(),null!==this.recommendedMedia&&(this.recommendedMedia.initWrappers(this.playerElem.parentNode),this.props.inEmbed&&(this.playerInstance.player.one("pause",this.recommendedMedia.init),this.initRecommendedMedia())),this.playerInstance.player.one("ended",this.onVideoEnd)}onVideoRestart(){null!==this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("inline"),this.props.inEmbed&&this.playerInstance.player.one("pause",this.recommendedMedia.init),this.playerInstance.player.one("ended",this.onVideoEnd))}onVideoEnd(){if(null!==this.recommendedMedia&&(this.props.inEmbed||this.initRecommendedMedia(),this.recommendedMedia.updateDisplayType("full"),this.playerInstance.player.one("playing",this.onVideoRestart)),!this.props.inEmbed&&l.MediaPageStore.get("playlist-id")){const e=document.querySelector(".video-player .more-media"),t=document.querySelector(".video-player .vjs-actions-anim");return this.upNextLoaderView.cancelTimer(),l.MediaPageStore.get("playlist-next-media-url")&&(e&&(e.style.display="none"),t&&(t.style.display="none")),void this.upNextLoaderView.hideTimerView()}this.upNextLoaderView&&(l.PageStore.get("media-auto-play")?(this.upNextLoaderView.startTimer(),this.playerInstance.player.one("play",function(){this.upNextLoaderView.cancelTimer()}.bind(this))):this.upNextLoaderView.cancelTimer())}onUpdateMediaAutoPlay(){this.upNextLoaderView&&(l.PageStore.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.playerInstance.isEnded()):this.upNextLoaderView.hideTimerView())}render(){let e=null,t=null;!this.props.inEmbed&&l.MediaPageStore.get("playlist-id")?(e=l.MediaPageStore.get("playlist-next-media-url"),t=l.MediaPageStore.get("playlist-previous-media-url")):e=this.props.data.related_media.length&&!this.props.inEmbed?this.props.data.related_media[0].url:null;const i=this.props.data.sprites_url?{url:this.props.siteUrl+"/"+this.props.data.sprites_url.replace(/^\//g,""),frame:{width:160,height:90,seconds:10}}:null;return n.createElement("div",{key:(this.props.inEmbed?"embed-":"")+"player-container",className:"player-container"+(this.videoSources.length?"":" player-container-error"),style:this.props.containerStyles,ref:"playerContainer"},n.createElement("div",{className:"player-container-inner",ref:"playerContainerInner",style:this.props.containerStyles},this.state.displayPlayer&&null!==l.MediaPageStore.get("media-load-error-type")?n.createElement(p.lg,{errorMessage:l.MediaPageStore.get("media-load-error-message")}):null,this.state.displayPlayer&&null==l.MediaPageStore.get("media-load-error-type")?n.createElement("div",{className:"video-player",ref:"videoPlayerWrapper",key:"videoPlayerWrapper"},n.createElement(s.SiteConsumer,null,(a=>n.createElement(p.L9,{playerVolume:this.browserCache.get("player-volume"),playerSoundMuted:this.browserCache.get("player-sound-muted"),videoQuality:this.browserCache.get("video-quality"),videoPlaybackSpeed:parseInt(this.browserCache.get("video-playback-speed"),10),inTheaterMode:this.browserCache.get("in-theater-mode"),siteId:a.id,siteUrl:a.url,info:this.videoInfo,cornerLayers:this.cornerLayers,sources:this.videoSources,poster:this.videoPoster,previewSprite:i,subtitlesInfo:this.props.data.subtitles_info,enableAutoplay:!this.props.inEmbed,inEmbed:this.props.inEmbed,hasTheaterMode:!this.props.inEmbed,hasNextLink:!!e,hasPreviousLink:!!t,errorMessage:l.MediaPageStore.get("media-load-error-message"),onClickNextCallback:this.onClickNext,onClickPreviousCallback:this.onClickPrevious,onStateUpdateCallback:this.onStateUpdate,onPlayerInitCallback:this.onPlayerInit})))):null))}}function f(e){let t=null,i=[];var n=location.search.substr(1).split("&");for(let a=0;a<n.length;a++)i=n[a].split("="),i[0]===e&&(t=decodeURIComponent(i[1]));return t}h.defaultProps={inEmbed:!0,siteUrl:r().string.isRequired},h.propTypes={inEmbed:r().bool},new MutationObserver(((e,t)=>{const i=document.querySelector(".video-js.vjs-mediacms");if(i){const e=i.querySelector("video");e&&(function(e){if(!e||!e.tagName||"video"!==e.tagName.toLowerCase())return void m.error("Invalid video element:",e);const t=videojs(e);t.playsinline(!0),t.on("loadedmetadata",(function(){const e=parseInt(f("muted")),i=parseInt(f("autoplay")),n=parseInt(f("t"));1==e&&t.muted(!0),n>=0&&n<t.duration()?t.currentTime(n):n>=0&&n>=t.duration()&&t.play(),1===i&&t.play()}))}(e),t.disconnect())}})).observe(document,{childList:!0,subtree:!0})},8899:function(e,t,i){i.r(t),i.d(t,{SiteConsumer:function(){return o},SiteContext:function(){return r}});var n=i(9471),a=i(3997);const r=(0,n.createContext)((0,a.$)(window.MediaCMS).site),o=r.Consumer;t.default=r},9284:function(e,t,i){i(9471)},9942:function(e,t,i){var n,a=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var a=Object.getOwnPropertyDescriptor(t,i);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,a)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=n(e),o=0;o<i.length;o++)"default"!==i[o]&&a(t,e,i[o]);return r(t,e),t}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedPage=void 0;var l=o(i(9471)),d=i(8790),u=i(7460),c=i(285),p=s(i(8531)),m={position:"fixed",top:0,left:0,right:0,bottom:0,display:"block"},h={width:"100%",height:"100%"};t.EmbedPage=function(){var e=(0,l.useState)(!1),t=e[0],i=e[1],n=(0,l.useState)(!1),a=n[0],r=n[1],o=function(){i(!0)},s=function(){r(!0)};return(0,l.useEffect)((function(){return u.MediaPageStore.on("loaded_video_data",o),u.MediaPageStore.on("loaded_media_error",s),c.MediaPageActions.loadMediaData(),function(){u.MediaPageStore.removeListener("loaded_video_data",o),u.MediaPageStore.removeListener("loaded_media_error",s)}}),[]),l.default.createElement("div",{className:"embed-wrap",style:m},a&&l.default.createElement("div",{className:"player-container player-container-error",style:h},l.default.createElement("div",{className:"player-container-inner",style:h},l.default.createElement("div",{className:"error-container"},l.default.createElement("div",{className:"error-container-inner"},l.default.createElement("span",{className:"icon-wrap"},l.default.createElement("i",{className:"material-icons"},"error_outline")),l.default.createElement("span",{className:"msg-wrap"},u.MediaPageStore.get("media-load-error-message")))))),t&&l.default.createElement(d.SiteConsumer,null,(function(e){return l.default.createElement(p.default,{data:u.MediaPageStore.get("media-data"),siteUrl:e.url,containerStyles:h})})))}}},i={};function n(e){var a=i[e];if(void 0!==a)return a.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=function(t,i,a,r){if(!i){var o=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,l=0;l<i.length;l++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,a,r]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=722,function(){var e={722:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,o=i[0],s=i[1],l=i[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var u=l(n)}for(t&&t(i);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},i=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var a=n.O(void 0,[276],(function(){return n(8175)}));a=n.O(a)}();