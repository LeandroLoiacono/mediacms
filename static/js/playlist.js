!function(){"use strict";var e,t={463:function(e,t,a){a.d(t,{c:function(){return n}});var l=a(4571),i=a.n(l);function n(e,t){let a=i()(e,{});return""!==a.origin&&"null"!==a.origin&&a.origin||(a=i()(t+"/"+e.replace(/^\//g,""),{})),a.toString()}},826:function(e,t,a){var l=a(2985),i=a(9471),n=a(285),s=a(8790),o=a(5338),r=a(7460),c=a(7664),u=a(3706),d=a(2289),m=a(6014),p=a(8713),y=a.n(p),g=a(4737);function f(e){return i.createElement(g.k,{items:e.media,playlistId:e.playlistId,hidePlaylistOptions:e.hidePlaylistOptions,singleLinkContent:!0,hideDate:!0,hideViews:!0,hidePlaylistOrderNumber:!1,horizontalItemsOrientation:!0,itemsCountCallback:e.itemsCountCallback,itemsLoadCallback:e.itemsLoadCallback,pageItems:99999,inPlaylistPage:!0})}f.propTypes={media:y().array.isRequired,playlistId:y().string.isRequired,itemsCountCallback:y().func,itemsLoadCallback:y().func,hidePlaylistOptions:y().bool},f.defaultProps={hidePlaylistOptions:!0};class P extends i.PureComponent{constructor(e){super(e),this.state={media:e.media},this.containerRef=i.createRef(),this.onItemsLoad=this.onItemsLoad.bind(this)}onItemsLoad(){if(!this.props.loggedinUserPlaylist)return;const e=this.containerRef.current.querySelector(".items-list");if(!e)return;const t=this.props.id;function a(e){}function l(e){}const i=function(e){return this.state.media[e]}.bind(this),o=function(e){const t=[];let a=0;for(;a<e.length;)t.push(this.state.media[e[a]]),a+=1;this.setState({media:t},(()=>{n.PlaylistPageActions.reorderedMediaInPlaylist(this.state.media)}))}.bind(this);d.Ay.create(e,{onStart:function(t){e.classList.add("on-dragging")},onEnd:function(n){const r=[],c=e.querySelectorAll(".item-order-number div div");let u,d,p,y=0;for(;y<c.length;)u=parseInt(c[y].getAttribute("data-order"),10),d=y+1,d!==u&&(p=i(u-1).friendly_token,(0,m.putRequest)(s.ApiUrlContext._currentValue.playlists+"/"+t,{type:"ordering",ordering:d,media_friendly_token:p},{headers:{"X-CSRFToken":(0,m.csrfToken)()}},!1,a,l)),r.push(u-1),c[y].setAttribute("data-order",d),c[y].innerHTML=d,y+=1;e.classList.remove("on-dragging"),o(r)}})}render(){return i.createElement("div",{ref:this.containerRef,className:"playlist-videos-list"+(this.props.loggedinUserPlaylist?" draggable":"")},this.state.media.length?i.createElement(f,{itemsLoadCallback:this.onItemsLoad,playlistId:this.props.id,media:this.state.media,hidePlaylistOptions:!this.props.loggedinUserPlaylist}):null)}}var h=a(9479);if(window.MediaCMS.site.devEnv){const e=()=>{let e=null,t=null;const a=window.location.search.split("?")[1];return a&&a.split("&").forEach((a=>{0===a.indexOf("m=")?e=a.split("m=")[1]:0===a.indexOf("pl=")&&(t=a.split("pl=")[1])})),{mediaId:e,playlistId:t}},{playlistId:t}=e();t&&(window.MediaCMS.playlistId=t)}function b(e){if(!e.media||!e.media.length)return i.createElement("span",null,e.children);let t=e.media[0].url;return window.MediaCMS.site.devEnv&&-1<t.indexOf("view?")&&(t="/media.html?"+t.split("view?")[1]),t+="&pl="+e.id,e.media&&e.media.length?i.createElement("a",{href:t,title:""},e.children):i.createElement("span",null,e.children)}function v(e){const[t,a]=(0,i.useState)(null);return(0,i.useEffect)((()=>{if(e.thumb&&"string"==typeof e.thumb){const t=e.thumb.trim();a(""!==t?t:null)}else a(null)}),[e.thumb]),i.createElement("div",{className:"playlist-thumb"+(t?"":" no-thumb"),style:{backgroundImage:'url("'+t+'")'}},i.createElement(b,{id:e.id,media:e.media},i.createElement("span",null,t?i.createElement("img",{src:t,alt:""}):null,i.createElement("span",{className:"play-all"},i.createElement("span",null,i.createElement("span",null,i.createElement("i",{className:"material-icons"},"play_arrow"),i.createElement("span",{className:"play-all-label"},"PLAY ALL")))))))}function E(e){return i.createElement("div",{className:"playlist-title"},i.createElement("h1",null,e.title))}function S(e){return i.createElement("div",{className:"playlist-meta"},i.createElement("div",{className:"playlist-videos-number"},e.totalItems," media"),e.dateLabel?i.createElement("div",{className:"playlist-last-update"},e.dateLabel):null)}function k(e){const[t,a,l]=(0,o.usePopup)(),[s,r]=(0,i.useState)("main");return i.createElement("div",{className:"playlist-options-wrap"+("main"===s?" playlist-options-main":"")},i.createElement(l,{contentRef:t},i.createElement(c.CircleIconButton,null,i.createElement(c.MaterialIcon,{type:"more_horiz"}))),i.createElement(a,{contentRef:t},i.createElement(c.NavigationContentApp,{pageChangeCallback:r,initPage:"main",focusFirstItemOnPageChange:!1,pages:(u=function(){n.PlaylistPageActions.removePlaylist(),t.current.toggle()},d=function(){t.current.toggle()},{main:i.createElement(c.PopupMain,null,i.createElement(c.NavigationMenuList,{items:[{itemType:"open-subpage",text:"Delete",icon:"delete",buttonAttr:{className:"change-page","data-page-id":"proceedPlaylistRemovalPopup"}}]})),proceedPlaylistRemovalPopup:i.createElement(c.PopupMain,null,i.createElement("div",{className:"popup-message"},i.createElement("span",{className:"popup-message-title"},"Playlist removal"),i.createElement("span",{className:"popup-message-main"},"You're willing to remove playlist permanently?")),i.createElement("hr",null),i.createElement("span",{className:"popup-message-bottom"},i.createElement("button",{className:"button-link cancel-playlist-removal",onClick:d},"CANCEL"),i.createElement("button",{className:"button-link proceed-playlist-removal",onClick:u},"PROCEED")))}),pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"})));var u,d}function C(e){const[t,a,l]=(0,o.usePopup)();function d(){t.current.toggle()}function m(e){setTimeout((function(){n.PageActions.addNotification("Playlist updated","playlistUpdateCompleted"),d()}),100)}function p(){setTimeout((function(){n.PageActions.addNotification("Playlist update failed","playlistUpdateFailed"),d()}),100)}function y(e){setTimeout((function(){n.PageActions.addNotification("Playlist removed. Redirecting...","playlistDelete"),setTimeout((function(){window.location.href=s.MemberContext._currentValue.pages.playlists}),2e3)}),100)}function g(e){setTimeout((function(){n.PageActions.addNotification("Playlist removal failed","playlistDeleteFail")}),100)}return(0,i.useEffect)((()=>(r.PlaylistPageStore.on("playlist_update_completed",m),r.PlaylistPageStore.on("playlist_update_failed",p),r.PlaylistPageStore.on("playlist_removal_completed",y),r.PlaylistPageStore.on("playlist_removal_failed",g),()=>{r.PlaylistPageStore.removeListener("playlist_update_completed",m),r.PlaylistPageStore.removeListener("playlist_update_failed",p),r.PlaylistPageStore.removeListener("playlist_removal_completed",y),r.PlaylistPageStore.removeListener("playlist_removal_failed",g)})),[]),i.createElement("div",{className:"edit-playlist"},i.createElement(l,{contentRef:t},i.createElement(c.CircleIconButton,null,i.createElement(c.MaterialIcon,{type:"edit"}),i.createElement("span",null,"EDIT"))),i.createElement(a,{contentRef:t},i.createElement("div",{className:"popup-fullscreen"},i.createElement(c.PopupMain,null,i.createElement("span",{className:"popup-fullscreen-overlay"}),i.createElement("div",{className:"edit-playlist-form-wrap"},i.createElement("div",{className:"edit-playlist-popup-title"},"Edit playlist",i.createElement(c.CircleIconButton,{type:"button",onClick:d},i.createElement(c.MaterialIcon,{type:"close"}))),i.createElement(u.w,{date:(new Date).getTime(),id:r.PlaylistPageStore.get("playlistId"),onCancel:d,onPlaylistSave:function(){}}))))))}function M(e){return e.loggedinUserPlaylist?i.createElement("div",{className:"playlist-actions"},e.loggedinUserPlaylist?i.createElement(k,null):null):null}function N(e){return i.createElement("div",{className:"playlist-author"},i.createElement("div",null,i.createElement("div",{className:"playlist-author-thumb"},i.createElement("a",{href:e.link,title:e.name},e.thumb?i.createElement("span",{style:{backgroundImage:"url("+e.thumb+")"}},i.createElement("img",{src:e.thumb,alt:""})):i.createElement("span",null,i.createElement(c.MaterialIcon,{type:"person"})))),i.createElement("div",{className:"playlist-author-name"},i.createElement("a",{href:e.link,title:e.name},e.name)),e.loggedinUserPlaylist?i.createElement(C,null):null))}class I extends h.Y{constructor(e){super(e,"playlist-page"),this.state={thumb:r.PlaylistPageStore.get("thumb"),media:r.PlaylistPageStore.get("playlist-media"),savedPlaylist:r.PlaylistPageStore.get("saved-playlist"),loggedinUserPlaylist:r.PlaylistPageStore.get("logged-in-user-playlist"),title:r.PlaylistPageStore.get("title"),description:r.PlaylistPageStore.get("description")},this.onLoadPlaylistData=this.onLoadPlaylistData.bind(this),r.PlaylistPageStore.on("loaded_playlist_data",this.onLoadPlaylistData),this.onMediaRemovedFromPlaylist=this.onMediaRemovedFromPlaylist.bind(this),r.PlaylistPageStore.on("removed_media_from_playlist",this.onMediaRemovedFromPlaylist),this.onMediaReorderedInPlaylist=this.onMediaReorderedInPlaylist.bind(this),r.PlaylistPageStore.on("reordered_media_in_playlist",this.onMediaReorderedInPlaylist),this.onCompletePlaylistUpdate=this.onCompletePlaylistUpdate.bind(this),r.PlaylistPageStore.on("playlist_update_completed",this.onCompletePlaylistUpdate)}onCompletePlaylistUpdate(){this.setState({thumb:r.PlaylistPageStore.get("thumb"),title:r.PlaylistPageStore.get("title"),description:r.PlaylistPageStore.get("description")})}onLoadPlaylistData(){this.setState({thumb:r.PlaylistPageStore.get("thumb"),title:r.PlaylistPageStore.get("title"),description:r.PlaylistPageStore.get("description"),media:r.PlaylistPageStore.get("playlist-media"),savedPlaylist:r.PlaylistPageStore.get("saved-playlist"),loggedinUserPlaylist:r.PlaylistPageStore.get("logged-in-user-playlist")})}componentDidMount(){n.PlaylistPageActions.loadPlaylistData()}onMediaRemovedFromPlaylist(){this.setState({media:r.PlaylistPageStore.get("playlist-media"),thumb:r.PlaylistPageStore.get("thumb")})}onMediaReorderedInPlaylist(){this.setState({media:r.PlaylistPageStore.get("playlist-media"),thumb:r.PlaylistPageStore.get("thumb")})}pageContent(){const e=r.PlaylistPageStore.get("playlistId");return e?[i.createElement("div",{key:"playlistDetails",className:"playlist-details"},i.createElement(v,{id:e,thumb:this.state.thumb,media:this.state.media}),i.createElement(E,{title:this.state.title}),i.createElement(S,{totalItems:r.PlaylistPageStore.get("total-items"),dateLabel:r.PlaylistPageStore.get("date-label"),viewsCount:r.PlaylistPageStore.get("views-count")}),i.createElement(M,{loggedinUserPlaylist:this.state.loggedinUserPlaylist,savedPlaylist:this.state.savedPlaylist}),this.state.description?i.createElement("div",{className:"playlist-description"},this.state.description):null,i.createElement(N,{name:r.PlaylistPageStore.get("author-name"),link:r.PlaylistPageStore.get("author-link"),thumb:r.PlaylistPageStore.get("author-thumb"),loggedinUserPlaylist:this.state.loggedinUserPlaylist})),i.createElement(P,{key:"playlistMediaList_"+this.state.media.length,id:e,media:this.state.media,loggedinUserPlaylist:this.state.loggedinUserPlaylist})]:null}}(0,l.C)("page-playlist",I)},878:function(e,t,a){a.d(t,{c:function(){return c}});var l=a(9471),i=a(8713),n=a.n(i),s=a(6387),o=a(5321),r=a(2828);function c(e){const{thumbnail:t}=(0,s.useUser)(),a={"aria-label":"Account profile photo that opens list of options and settings pages links",className:"thumbnail"};switch(e.isButton?void 0!==e.onClick&&(a.onClick=e.onClick):a.type="span",e.size){case"small":case"large":a.className+=" "+e.size+"-thumb"}return l.createElement(o.i,a,t?l.createElement("img",{src:t,alt:""}):l.createElement(r.Z,{type:"person"}))}c.propTypes={isButton:n().bool,size:n().oneOf(["small","medium","large"]),onClick:n().func},c.defaultProps={isButton:!1,size:"medium"}},3818:function(e,t,a){a(9471);var l=a(8713),i=a.n(l);i().string,i().array.isRequired,i().string,i().number,i().number,i().number,i().func,i().func},5615:function(e,t,a){a.d(t,{L9:function(){return d}});var l=a(9471),i=a(8713),n=a.n(i),s=a(4571),o=a.n(s),r=a(4480),c=a.n(r);function u(e,t){let a=o()(e,{});return""!==a.origin&&"null"!==a.origin&&a.origin||(a=o()(t+"/"+e.replace(/^\//g,""),{})),a.toString()}function d(e){const t=(0,l.useRef)(null);let a=null;const i={playerVolume:e.playerVolume,playerSoundMuted:e.playerSoundMuted,videoQuality:e.videoQuality,videoPlaybackSpeed:e.videoPlaybackSpeed,inTheaterMode:e.inTheaterMode};function n(){void 0!==e.onClickNextCallback&&e.onClickNextCallback()}function s(){void 0!==e.onClickPreviousCallback&&e.onClickPreviousCallback()}function o(t){i.playerVolume!==t.volume&&(i.playerVolume=t.volume),i.playerSoundMuted!==t.soundMuted&&(i.playerSoundMuted=t.soundMuted),i.videoQuality!==t.quality&&(i.videoQuality=t.quality),i.videoPlaybackSpeed!==t.playbackSpeed&&(i.videoPlaybackSpeed=t.playbackSpeed),i.inTheaterMode!==t.theaterMode&&(i.inTheaterMode=t.theaterMode),void 0!==e.onStateUpdateCallback&&e.onStateUpdateCallback(t)}function r(){if(null!==a||null!==e.errorMessage)return;if(e.inEmbed||(window.removeEventListener("focus",r),document.removeEventListener("visibilitychange",r)),!t.current)return;e.inEmbed||t.current.focus();const l={on:!1};if(void 0!==e.subtitlesInfo&&null!==e.subtitlesInfo&&e.subtitlesInfo.length){l.languages=[];let t=0;for(;t<e.subtitlesInfo.length;)void 0!==e.subtitlesInfo[t].src&&void 0!==e.subtitlesInfo[t].srclang&&void 0!==e.subtitlesInfo[t].label&&l.languages.push({src:u(e.subtitlesInfo[t].src,e.siteUrl),srclang:e.subtitlesInfo[t].srclang,label:e.subtitlesInfo[t].label}),t+=1;l.languages.length&&(l.on=!0)}a=new(c())(t.current,{enabledTouchControls:!0,sources:e.sources,poster:e.poster,autoplay:e.enableAutoplay,bigPlayButton:!0,controlBar:{theaterMode:e.hasTheaterMode,pictureInPicture:!1,next:!!e.hasNextLink,previous:!!e.hasPreviousLink},subtitles:l,cornerLayers:e.cornerLayers,videoPreviewThumb:e.previewSprite},{volume:i.playerVolume,soundMuted:i.playerSoundMuted,theaterMode:i.inTheaterMode,theSelectedQuality:void 0,theSelectedPlaybackSpeed:i.videoPlaybackSpeed||1},e.info,[.25,.5,.75,1,1.25,1.5,1.75,2],o,n,s),void 0!==e.onPlayerInitCallback&&e.onPlayerInitCallback(a,t.current)}return i.playerVolume=null===i.playerVolume?1:Math.max(Math.min(Number(i.playerVolume),1),0),i.playerSoundMuted=null!==i.playerSoundMuted&&i.playerSoundMuted,i.videoQuality=null!==i.videoQuality?i.videoQuality:"Auto",i.videoPlaybackSpeed=null!==i.videoPlaybackSpeed&&i.videoPlaybackSpeed,i.inTheaterMode=null!==i.inTheaterMode&&i.inTheaterMode,(0,l.useEffect)((()=>(e.inEmbed||document.hasFocus()||"visible"===document.visibilityState?r():(window.addEventListener("focus",r),document.addEventListener("visibilitychange",r)),()=>{null!==a&&(videojs(t.current).dispose(),a=null),void 0!==e.onUnmountCallback&&e.onUnmountCallback()})),[]),null===e.errorMessage?l.createElement("video",{ref:t,className:"video-js vjs-mediacms native-dimensions"}):l.createElement("div",{className:"error-container"},l.createElement("div",{className:"error-container-inner"},l.createElement("span",{className:"icon-wrap"},l.createElement("i",{className:"material-icons"},"error_outline")),l.createElement("span",{className:"msg-wrap"},e.errorMessage)))}n().string.isRequired,d.propTypes={playerVolume:n().string,playerSoundMuted:n().bool,videoQuality:n().string,videoPlaybackSpeed:n().number,inTheaterMode:n().bool,siteId:n().string.isRequired,siteUrl:n().string.isRequired,errorMessage:n().string,cornerLayers:n().object,subtitlesInfo:n().array.isRequired,inEmbed:n().bool.isRequired,sources:n().array.isRequired,info:n().object.isRequired,enableAutoplay:n().bool.isRequired,hasTheaterMode:n().bool.isRequired,hasNextLink:n().bool.isRequired,hasPreviousLink:n().bool.isRequired,poster:n().string,previewSprite:n().object,onClickPreviousCallback:n().func,onClickNextCallback:n().func,onPlayerInitCallback:n().func,onStateUpdateCallback:n().func,onUnmountCallback:n().func},d.defaultProps={errorMessage:null,cornerLayers:{}}},6568:function(e,t,a){a.d(t,{x:function(){return s}});var l=a(9471),i=a(8713),n=a.n(i);function s(e){let t="spinner-loader";switch(e.size){case"tiny":case"x-small":case"small":case"large":case"x-large":t+=" "+e.size}return l.createElement("div",{className:t},l.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},l.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"1.5",strokeMiterlimit:"10"})))}s.propTypes={size:n().oneOf(["tiny","x-small","small","medium","large","x-large"])},s.defaultProps={size:"medium"}},7664:function(e,t,a){a.d(t,{CircleIconButton:function(){return l.i},MaterialIcon:function(){return i.Z},NavigationContentApp:function(){return n.V},NavigationMenuList:function(){return s.S},Notifications:function(){return o.$},PopupMain:function(){return r.AP},PopupTop:function(){return r.cp},SpinnerLoader:function(){return c.x},UserThumbnail:function(){return u.c}});var l=a(5321),i=(a(7256),a(3135),a(2828)),n=a(5305),s=a(7201),o=a(6089),r=(a(3818),a(2901)),c=a(6568),u=a(878)}},a={};function l(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e].call(n.exports,n,n.exports,l),n.exports}l.m=t,e=[],l.O=function(t,a,i,n){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],n=e[u][2];for(var o=!0,r=0;r<a.length;r++)(!1&n||s>=n)&&Object.keys(l.O).every((function(e){return l.O[e](a[r])}))?a.splice(r--,1):(o=!1,n<s&&(s=n));if(o){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,i,n]},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=33,function(){var e={33:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,s=a[0],o=a[1],r=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in o)l.o(o,i)&&(l.m[i]=o[i]);if(r)var u=r(l)}for(t&&t(a);c<s.length;c++)n=s[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},a=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var i=l.O(void 0,[276],(function(){return l(826)}));i=l.O(i)}();